/*! amazon-dtb-javascript-api - apstag - v7.48.03 - 2020-04-16 19:15:25 */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){try{var e=parseInt(t,10);if(!isNaN(e))return!(e<=0)&&(100<=e||100*Math.random()<=e)}catch(t){}return!1}function i(t,e){var n=parseInt(e,10),r=[],o=0;if(!s(t))return r;if(isNaN(n)||n<1)return[t];for(var i=t.length;o<i;){var a=o;o+=n,r.push(t.slice(a,o))}return r}function a(){return"".concat(Math.round(1e12*Math.random())).concat(Date.now())}function c(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=new Array(t),r=0;r<t;r++)n[r]=e[Math.floor(Math.random()*e.length)];return n.join("")}function u(t){return"object"===r(t)&&null!==t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){return u(t)&&void 0!==t[e]&&""!==t[e]}function f(){var t="amzn_lsTest";try{return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch(t){return!1}}function l(t,e){return-1!==t.indexOf(e)}function b(){return document.cookie.split("; ").map((function(t){return t.split("=")}))}function p(t){var e=new Date;return e.setDate(e.getDate()+t),e.toUTCString()}function g(t){try{var e=t.innerWidth||t.document.documentElement.clientWidth||t.document.body.clientWidth,n=t.innerHeight||t.document.documentElement.clientHeight||t.document.body.clientHeight;return"".concat(e,"x").concat(n)}catch(t){}return"x"}function m(t,e){return decodeURIComponent(t).split("?")[0].split("#")[0]===decodeURIComponent(e).split("?")[0].split("#")[0]}function O(t){var e=Object.keys(t);return e.filter((function(e){return t[e]})).length===e.length}n.d(e,"n",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return c})),n.d(e,"l",(function(){return u})),n.d(e,"k",(function(){return s})),n.d(e,"m",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"j",(function(){return l})),n.d(e,"d",(function(){return b})),n.d(e,"g",(function(){return p})),n.d(e,"h",(function(){return g})),n.d(e,"b",(function(){return m})),n.d(e,"a",(function(){return O}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r,o=n(3),i=n(0),a=n(4);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{AAXReqs:[],aaxViewabilityEnabled:!1,bidConfigs:{},bidReqs:{},bsPixels:{},cfg:{v:-1,CSM_JS:"//c.amazon-adsystem.com/aax2/csm.js.gz",CSM_RTB_COMMUNICATOR_JS:"//c.amazon-adsystem.com/bao-csm/aps-comm/aps_csm.js",DEBUG_APP_HTML:"//c.amazon-adsystem.com/aax2/debugApp.html",DEBUG_APP_HTML_V2:"//c.amazon-adsystem.com/aax2/debug_app_v2.html",DEFAULT_TIMEOUT:2e3,DTB_PATH:"/e/dtb",PIXEL_PATH:"/x/px/",LATENCY_SAMPLING_RATE:1,COOKIE_MATCH_DELAY:0,MAX_SLOTS_PER_REQUEST:1,CF_ROUTING_RATE:100,SLOT_RENDER_SAMPLING_RATE:1},cmpFired:!1,config:{pubID:""},displayAdServer:{noBidSlotIDs:[],shouldSampleRender:!1,slotRenderEndedSet:!1},errors:[],eventLog:[],experiments:{},gamSlotFetchLog:[],gamSlotRenderPixel:{aaxReqOffset:0,gamSlotFetchLogOffset:0},gdpr:null,gdprQue:[],hosts:{DEFAULT_AAX_BID_HOST:"aax.amazon-adsystem.com",DEFAULT_AAX_PIXEL_HOST:"aax.amazon-adsystem.com"},Q:[],slotBids:{},slotIdMap:[],sync917:!1,targetingKeys:{}},e=1<arguments.length?arguments[1]:void 0;return{AAXReqs:function(t,e){switch(e.type){case"RECORD_AAX_REQUEST":return[].concat(d(t),[e.data]);case"RECORD_AAX_REQ_PROP":return t.map((function(t){return(t=u({},t)).bidReqID===e.bidReqID&&(t[e.key]=e.value),t}));default:return d(t)}}(t.AAXReqs,e),aaxViewabilityEnabled:function(t,e){switch(e.type){case"SET_VIEWABILITY":return e.viewability;default:return t}}(t.aaxViewabilityEnabled,e),bidConfigs:function(t,e){switch(e.type){case"RECORD_ORIGINAL_BID_CONFIG":return u({},t,s({},e.bidConfig.bidReqID,e.bidConfig));default:return u({},t)}}(t.bidConfigs,e),bidReqs:function(t,e){var n;switch(e.type){case"ADD_CHUNKED_REQUESTS":return u({},t,s({},e.fid,u({},t[e.fid],{networkReqs:new Array(e.numChunks)})));case"NEW_FETCH_BID_REQUEST":return u({},t,s({},e.fid,{pto:e.pto,hasCallbackExecuted:!1,networkReqs:[]}));case"RECORD_CALLBACK":return u({},t,s({},e.fid,u({},t[e.fid],{hasCallbackExecuted:!0})));case"RECORD_NETWORK_EXCHANGE":return u({},t,s({},e.fid,u({},t[e.fid],{networkReqs:Object.assign(d(t[e.fid].networkReqs),s({},e.networkID,u({},t[e.fid].networkReqs[e.networkID],(n={},s(n,"".concat(e.exchangeType,"Time"),e.timestamp),s(n,"inFlight","request"===e.exchangeType),n))))})));case"RECORD_TIMEOUT":return u({},t,s({},e.fid,u({},t[e.fid],{networkReqs:t[e.fid].networkReqs.map((function(t){return t.inFlight?u({},t,{timeOut:e.timeOut}):t}))})));default:return u({},t)}}(t.bidReqs,e),bsPixels:function(t,e){switch(e.type){case"RECORD_BID_INFO_SENT":return u({},t,s({},e.bidInfo.iid,e.bidInfo.state));default:return u({},t)}}(t.bsPixels,e),cfg:function(t,e){switch(e.type){case"SET_CFG":return u({},t,{},e.cfg);default:return u({},t)}}(t.cfg,e),cmpFired:function(t,e){switch(e.type){case"CMP_FIRED":return!0;default:return t}}(t.cmpFired,e),config:function(t,e){switch(e.type){case"SET_CONFIG":return u({},e.config,{gdpr:u({cmpTimeout:e.defaultCmpTimeout},e.config.gdpr),isSelfServePub:void 0!==e.config.pubID&&5<=e.config.pubID.length});default:return u({},t)}}(t.config,e),displayAdServer:function(t,e){switch(e.type){case"SLOT_RENDER_ENDED_SET":return u({},t,{slotRenderEndedSet:!0});case"NO_BID_ON_ADSERVER_SLOTS":return u({},t,{noBidSlotIDs:t.noBidSlotIDs.concat(e.slotIDs)});case"REQUESTED_BID_FOR_ADSERVER_SLOTS":return u({},t,{noBidSlotIDs:t.noBidSlotIDs.filter((function(t){return!Object(i.j)(e.slotIDs,t)}))});case"SHOULD_SAMPLE_SLOT_RENDER":return u({},t,{shouldSampleRender:e.value});default:return u({},t,{noBidSlotIDs:d(t.noBidSlotIDs)})}}(t.displayAdServer,e),errors:function(t,e){switch(e.type){case"LOG_ERROR":return[].concat(d(t),[u({},e.error)]);default:return d(t)}}(t.errors,e),eventLog:function(t,e){switch(e.type){case"LOG_EVENT":return[].concat(d(t),[u({},e.event)]);default:return d(t)}}(t.eventLog,e),experiments:function(t,e){switch(e.type){case"SHOULD_CHUNK_REQUESTS":return u({chunkRequests:!0===t.shouldSampleLatency&&e.value},t);case"SHOULD_CF_ROUTE":return u({},t,{shouldCFRoute:e.value});case"SHOULD_SAMPLE_LATENCY":return u({},t,{shouldSampleLatency:e.value});default:return u({},t)}}(t.experiments,e),gamSlotFetchLog:function(t,e){switch(e.type){case"LOG_GAM_EVENT":return[].concat(d(t),[u({},e.event)]);default:return d(t)}}(t.gamSlotFetchLog,e),gamSlotRenderPixel:function(t,e){switch(e.type){case"UPDATE_RENDER_OFFSETS":return u({},t,{},e.offsets);default:return u({},t)}}(t.gamSlotRenderPixel,e),gdpr:function(t,e){switch(e.type){case"SET_GDPR_CONFIG":return null===e.config?null:u({},e.config);default:return null===t?t:u({},t)}}(t.gdpr,e),gdprQue:function(t,e){switch(e.type){case"ADD_GDPR_QUE_ITEM":return[].concat(d(t),[e.func]);case"CLEAR_GDPR_QUE":return[];default:return d(t)}}(t.gdprQue,e),hosts:function(t,e){switch(e.type){case"SET_HOST":return u({},t,s({},e.hostName,e.hostValue));default:return u({},t)}}(t.hosts,e),Q:function(t,e){switch(e.type){case"SET_Q":return d(e.Q);default:return d(t)}}(t.Q,e),slotBids:function(t,e){switch(e.type){case"BID_STATE_CHANGE":return u({},t,s({},e.slotID,t[e.slotID].map((function(t){return t._targetingSetID===e._targetingSetID&&(t.bidState=e.bidState,e.bidState===o.b.rendered?t.timing.renderTime=e.ts:e.bidState===o.b.set&&t.timing.setAtTimes.push(e.ts)),t}))));case"UPDATE_BID_INFO_PROP":return void 0===t[e.slotID]||t[e.slotID].filter((function(t){return t.matchesBidCacheId(e.iid)})).length<1?u({},t):u({},t,s({},e.slotID,t[e.slotID].map((function(t){return t.matchesBidCacheId(e.iid)&&(t[e.key]=e.value),t}))));case"UPDATE_SLOT_BIDS":return u({},t,{},e.bids.reduce((function(e,n){return Object(i.m)(e,n.slotID)?e[n.slotID]=[].concat(d(e[n.slotID]),[n]):Object(i.m)(t,n.slotID)?e[n.slotID]=[].concat(d(t[n.slotID]),[n]):e[n.slotID]=[n],e}),{}));default:return u({},t)}}(t.slotBids,e),slotIdMap:function(t,e){switch(e.type){case"ADD_SLOT_ID":return-1===t.indexOf(e.slotID)?[].concat(d(t),[e.slotID]):t;default:return t}}(t.slotIdMap,e),sync917:function(t,e){switch(e.type){case"SET_SYNC_917":return e.value;default:return t}}(t.sync917,e),targetingKeys:function(t,e){switch(e.type){case"UPDATE_SLOT_BIDS":return u({},t,{},e.bids.reduce((function(e,n){return Object(i.m)(t,n.slotID)?e[n.slotID]=[].concat(d(t[n.slotID]),d((n.bidConfig.targeting?n.bidConfig.targeting:o.g).filter((function(e){return-1===t[n.slotID].indexOf(e)})))):e[n.slotID]=n.bidConfig.targeting?n.bidConfig.targeting:o.g,e}),{}));default:return u({},t)}}(t.targetingKeys,e)}}var l={getState:function(){return r},dispatch:function(t){r=f(r,t)}};Object(a.d)("redux")&&Object(i.i)()&&Object(i.m)(window,"__REDUX_DEVTOOLS_EXTENSION__")&&(l=window.__REDUX_DEVTOOLS_EXTENSION__(f)),l.dispatch({type:"NOOP"})},function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return g})),n.d(e,"a",(function(){return m}));var r,o,i=n(0),a=n(3),c=n(8),u=n(1),s=n(4),d=n(6),f=Object(i.n)(10),l=[];function b(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];try{(n||Object(s.d)("errors"))&&console.error(t);var b={lv:a.j,ts:Date.now(),url:encodeURIComponent(Object(d.f)(window)),r:encodeURIComponent(Object(d.g)(window)),_type:"apsLibraryError",e:{et:t.name,el:e,msg:t.message}};if(void 0===r){var p=u.a.getState();Object(i.m)(p,"config")&&(r=p.config.isSelfServePub,o=p.config.pubID)}return void 0!==r&&(r?(b.src=a.q,b.pubid=o):b.src=o),l.push(b),u.a.dispatch({type:"LOG_ERROR",error:b}),!!f&&(Object(c.b)(b),!0)}catch(t){console.error(t)}return!1}function p(t,e,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return b({name:e,message:"".concat(t," was of type '").concat(e,"' instead of '").concat(n,"'")},"TypeError-".concat(t),r)}function g(t,e){return function(){try{return t.apply(null,arguments)}catch(t){return b(t,e),null}}}function m(t){(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||Object(s.d)("errors"))&&console.warn(t)}!0===Object(s.c)("exposeErrors")&&(window.apstagErrors=l)},function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"u",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"f",(function(){return d})),n.d(e,"t",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return b})),n.d(e,"c",(function(){return p})),n.d(e,"n",(function(){return g})),n.d(e,"l",(function(){return m})),n.d(e,"m",(function(){return c})),n.d(e,"k",(function(){return s})),n.d(e,"s",(function(){return j})),n.d(e,"h",(function(){return O})),n.d(e,"r",(function(){return h})),n.d(e,"q",(function(){return v})),n.d(e,"j",(function(){return S})),n.d(e,"p",(function(){return w})),n.d(e,"i",(function(){return D})),n.d(e,"a",(function(){return E})),n.d(e,"o",(function(){return I}));var r,o,i=["amznbid","amzniid","amznsz","amznp"],a=["amznbid","amzniid","amznp","r_amznbid","r_amzniid","r_amznp"];(o=r=r||{}).new="NEW",o.exposed="EXPOSED",o.set="SET",o.rendered="RENDERED";var c,u,s,d="apstagDebug",f=["redux","fake_bids","verbose","console","console_v2","errors"],l="apstagDebugHeight",b="apstagDEBUG",p="apstagCfg",g=0,m=0;(u=c=c||{}).amznbid="testBid",u.amzniid="testImpression",u.amznp="testP",u.crid="testCrid",(s||(s={})).video="v";var O,y,h,_,j=["amznbid","amznp"];(y=O=O||{}).__apsid="ck",y.__aps_id_p="ckp",y.aps_ext_917="st",(_=h=h||{}).noRequest="0",_.bidInFlight="1",_.noBid="2";var v="600",S="7.48.03",w="https://",D="function"==typeof XMLHttpRequest&&void 0!==(new XMLHttpRequest).withCredentials,E="apstagLOADED",I=13},function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return E})),n.d(e,"e",(function(){return T}));var r=n(1),o=n(0),i=n(3),a=n(9),c=n(8),u=n(2),s=["getLog","getState"];function d(t,e,n){switch(-1!==s.indexOf(t)&&(Object(u.b)(new Error("Debug call made: ".concat(t)),"__apstag-debug-call-".concat(t,"__")),s=s.filter((function(e){return e!==t}))),t){case"getLog":return r.a.getState().eventLog;case"getState":return r.a.getState();case"enable":return D("fake_bids",!0),"DEBUG MODE ENABLED";case"disable":return D("fake_bids",!1),"DEBUG MODE DISABLED";case"enableConsole":return m(!1,"command"),"Debug console enabled";case"enableConsoleV2":return m(!0,"command"),"Debug console v2 enabled";case"disableConsole":return D("console",!1),D("console_v2",!1),null!==f&&document.body.removeChild(f),g=!1,Object(o.i)()&&window.localStorage.removeItem(i.d),"Debug console disabled";case"setDebug":return D(e,n)?"Set debug mode '".concat(e,"' to '").concat(n,"'"):"Failed to set debug mode '".concat(e,"' to '").concat(n,"'");default:return"unknown debug argument"}}var f,l,b,p,g=!1;function m(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=1<arguments.length?arguments[1]:void 0;if(D(t?"console_v2":"console",!0),!g){var n={url:t?r.a.getState().cfg.DEBUG_APP_HTML_V2:r.a.getState().cfg.DEBUG_APP_HTML,onload:O,onerror:function(){return Object(u.b)(new Error("Error Loading Debug Console"),"debugConsoleLoad-".concat(t?"v2":"v1"),!0)}};Object(a.d)(n),setTimeout((function(){var n={_type:"debugLoad",mode:t?2:1};Object(o.m)(r.a.getState().config,"pubID")&&(n.src=r.a.getState().config.pubID),null!==e&&(n.method=e),Object(c.b)(n)}),5e3)}}function O(t){var e=t.responseText;f=document.createElement("div"),l=document.createElement("div"),b=document.createElement("iframe");var n=200;w("console_v2")&&(n=330),Object(o.i)()&&null!==window.localStorage.getItem(i.d)&&(n=parseInt(window.localStorage.getItem(i.d),10)),(isNaN(n)||n>window.innerHeight)&&(n=200),f.style.background="#eaeded",f.style.zIndex="2147483647",f.style.bottom="0",f.style.position="fixed !important",f.style.display="block !important",f.style.left="0",f.style.right="0",f.style.height="".concat(n,"px"),l.style.cursor="row-resize",l.style.height="2px",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.right="0",l.style.backgroundColor="RGBA(0,0,0,0)",f.appendChild(l),b.frameBorder="0",b.marginHeight="0",b.marginWidth="0",b.scrolling="no",b.id="apstag-debug-iframe",b.src="about:blank",b.style.display="block",b.style.width="100%",b.style.height="".concat(n,"px"),f.appendChild(b),document.body.appendChild(f),null!==b.contentDocument&&(b.contentDocument.open(),b.contentDocument.write(e),b.contentDocument.close()),l.addEventListener("mousedown",_)}function y(t){var e=window.innerHeight-t.clientY;return e<200&&(e=200),f.style.height="".concat(e,"px"),b.style.height="".concat(e,"px"),e}function h(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1}function _(){void 0===p&&((p=document.createElement("div")).style.position="fixed",p.style.left="0",p.style.right="0",p.style.top="0",p.style.bottom="0",p.style.zIndex="9999999999"),f.appendChild(p),window.addEventListener("mouseup",v),window.addEventListener("mousemove",j)}function j(t){return y(t),h(t)}function v(t){null!==p&&f.removeChild(p),window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",v);var e=y(t);return Object(o.i)()&&window.localStorage.setItem(i.d,"".concat(e)),h(t)}function S(){if(!Object(o.i)())return[];var t=window.localStorage.getItem(i.f);null===t||"false"===t?t="[]":"true"===t&&(t='["fake_bids"]');var e=[];try{e=JSON.parse(t)}catch(t){}return Object(o.k)(e)||(e=[]),e.filter((function(t){return-1!==i.t.indexOf(t)}))}function w(t){return Object(o.j)(S(),t)}function D(t,e){if(!Object(o.i)())return!1;if(-1===i.t.indexOf(t))return!1;var n=S();return e&&-1===n.indexOf(t)?n.push(t):e||(n=n.filter((function(e){return e!==t}))),0===n.length?window.localStorage.removeItem(i.f):window.localStorage.setItem(i.f,JSON.stringify(n)),T(),!0}function E(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return Object(o.m)(window,i.e)&&Object(o.m)(window[i.e],t)?window[i.e][t]:e}var I=[];function T(){try{S().filter((function(t){return-1===I.indexOf(t)})).forEach((function(t){Object(u.b)(new Error("Debug method enabled: ".concat(t)),"__error-debug-mode-".concat(t,"__"),!0),I.push(t)}))}catch(t){Object(u.b)(t,"__error-debug-pixeled__",!0)}}},function(t,e,n){"use strict";var r=n(0),o=n(13);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(e,n){var r;return a(this,t),b(f(r=s(this,d(t).call(this,n.targetId,e))),"rawSlot",void 0),b(f(r),"mediaType","display"),r.rawSlot=n,r}return l(t,o.c),u(t,[{key:"initKeywords",value:function(){Object(r.m)(this.rawSlot,"keywords")||(this.rawSlot.keywords={})}},{key:"setTargeting",value:function(t,e){this.initKeywords(),this.rawSlot.keywords[t]=e}},{key:"getTargeting",value:function(t){return this.initKeywords(),Object(r.m)(this.rawSlot.keywords,t)?[this.rawSlot.keywords[t]]:[]}},{key:"clearTargeting",value:function(t){this.initKeywords(),delete this.rawSlot.keywords[t]}},{key:"sizes",get:function(){return this.rawSlot.sizes}}]),t}(),g=function(){function t(){var e,n;a(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return b(f(n=s(this,(e=d(t)).call.apply(e,[this].concat(o)))),"isSupported",!0),n}return l(t,o.b),u(t,[{key:"cmdQueuePush",value:function(t){window.apntag.anq.push(t)}},{key:"setTargeting",value:function(t,e){Object(r.m)(window,"apntag")&&Object(r.m)(window.apntag,"requests")&&(Object(r.m)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={}),window.apntag.requests.keywords[t]=e)}},{key:"getTargeting",value:function(t){if(!Object(r.m)(window,"apntag")||!Object(r.m)(window.apntag,"requests"))return[];Object(r.m)(window.apntag.requests,"keywords")||(window.apntag.requests.keywords={});var e=window.apntag.requests.keywords[t];return void 0===e?[]:[e]}},{key:"clearTargeting",value:function(t){Object(r.m)(window,"apntag")&&Object(r.m)(window.apntag,"requests")&&Object(r.m)(window.apntag.requests,"keywords")&&delete window.apntag.requests.keywords[t]}},{key:"hasAdServerObjectLoaded",value:function(){return Object(r.m)(window,"apntag")&&Object(r.m)(window.apntag,"loaded")&&!0===window.apntag.loaded}},{key:"isCommandQueueDefined",value:function(){return Object(r.m)(window,"apntag")&&Object(r.m)(window.apntag,"anq")}},{key:"getSlots",value:function(){var t=[];return Object(r.m)(window,"apntag")&&Object(r.m)(window.apntag,"requests")&&Object(r.m)(window.apntag.requests,"tags")&&Object(r.l)(window.apntag.requests.tags)&&Object.keys(window.apntag.requests.tags).forEach((function(e){var n=window.apntag.requests.tags[e];t.push(new p(e,n))})),t}}]),t}(),m=n(15);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S=function(){function t(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return v(_(n=function(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?_(t):e}(this,(e=h(t)).call.apply(e,[this].concat(o)))),"isSupported",!0),v(_(n),"needNewBidObject",!0),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(t,o.b),function(t,e,n){e&&y(t.prototype,e)}(t,[{key:"cmdQueuePush",value:function(t){window.sas.cmd.push(t)}},{key:"hasAdServerObjectLoaded",value:function(){return Object(r.m)(window,"sas")&&Object(r.m)(window.sas,"__smartLoaded")&&!0===window.sas.__smartLoaded}},{key:"isCommandQueueDefined",value:function(){return Object(r.m)(window,"sas")&&Object(r.m)(window.sas,"cmd")}}]),t}();n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return D}));var w=new o.b;function D(t){switch(t){case"appnexus":w=new g;break;case"googletag":w=new m.a;break;case"sas":w=new S;break;default:w=new o.b}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"i",(function(){return d})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return g})),n.d(e,"h",(function(){return O})),n.d(e,"a",(function(){return y}));var r=n(4),o=n(0),i=n(2),a=n(3),c=n(1);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return"string"!=typeof t?"":t.split("_").pop()}function d(t){return!Object(o.m)(t,"slots")}function f(t){var e,n=Object(r.c)("url");if(null!==n)return encodeURIComponent(n);try{e=t.top.location.href}catch(t){e=null}if(null===e||!e||void 0===e){e="";try{t.top!==t.self&&(e=t.document.referrer)}catch(t){}}return encodeURIComponent(e)}function l(t){var e,n="",o=Object(r.c)("url");if(null!==o)return encodeURIComponent(o);try{try{e=t.top.document.referrer}catch(n){e=t.document.referrer}n=encodeURIComponent(e)}catch(n){}return n}function b(){var t={cookiesParams:""};return Object(o.d)().forEach((function(e){if(e[0]in a.h)switch(e[0]){case"aps_ext_917":t.fb=e[1];break;default:t.cookiesParams+="&".concat(a.h[e[0]],"=").concat(e[1])}})),t.fb||c.a.getState().sync917||c.a.dispatch({type:"SET_SYNC_917",value:!0}),t}function p(t){var e=c.a.getState().config.blockedBidders;Object(o.m)(t,"blockedBidders")&&Object(o.k)(t.blockedBidders)&&(e=t.blockedBidders);var n="";return Object(o.k)(e)&&(n=JSON.stringify(e)),n}function g(){if(!Object(o.i)())return a.n;var t=c.a.getState();return Object(o.m)(t,"cfg")&&Object(o.m)(t.cfg,"v")&&-1!==t.cfg.v?t.cfg.v:null}function m(t){if(-1===["string","number"].indexOf(u(t)))return!1;try{var e=Math.floor(Number(t));if(e>a.l)return e}catch(t){Object(i.b)(t,"__error-getValidMilliseconds__",!0)}return!1}function O(t,e){var n=m(t.timeout);return!1===n&&(n=m(e.config.bidTimeout)),!1===n&&(n=m(e.cfg.DEFAULT_TIMEOUT)),n}function y(t,e){var n,r=!1;function o(e){if(!r)try{t(e)}catch(e){Object(i.b)(e,"executeFunctionOnceWithTimeout",!0)}clearTimeout(n),r=!0}return n=setTimeout(o,e,!0),o.bind(null,!1)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return O})),n.d(e,"d",(function(){return h})),n.d(e,"h",(function(){return _})),n.d(e,"e",(function(){return j})),n.d(e,"c",(function(){return v})),n.d(e,"i",(function(){return S})),n.d(e,"g",(function(){return w})),n.d(e,"f",(function(){return D}));var r=n(1),o=n(4),i=n(3),a=n(0),c=n(9),u=n(2),s=n(6),d=n(11),f=n(10);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"bidConfig",void 0),g(this,"bidState",i.b.new),g(this,"_targetingSetID",void 0),g(this,"timing",{setAtTimes:[]}),g(this,"pixelSent",!1),g(this,"bidReqID",""),g(this,"host",void 0),g(this,"ev",void 0),g(this,"cfe",void 0),g(this,"isAmp",!1),g(this,"doc",void 0),this.bidConfig=e,this._targetingSetID=Object(a.e)()}return function(t,e,n){e&&p(t.prototype,e)}(t,[{key:"matchesBidCacheId",value:function(t){var e=this;return this.bidConfig.targeting.reduce((function(n,r){return n||-1!==r.indexOf("amzniid")&&e.bidConfig[r]===t}),!1)}},{key:"targeting",get:function(){var t=this;return this.bidConfig.targeting.map((function(e){return"&".concat(e,"=").concat(t.bidConfig[e])})).join("")}},{key:"bidObject",get:function(){var t={slotID:this.bidConfig.slotID,amzniid:this.bidConfig.amzniid,amznbid:this.bidConfig.amznbid,amznp:this.bidConfig.amznp,amznsz:this.bidConfig.amznsz,size:this.bidConfig.amznsz};return"video"!==this.bidConfig.mediaType&&"v"!==this.bidConfig.mediaType||(t.mediaType="video",t.qsParams=this.targeting,t.encodedQsParams=encodeURIComponent(this.targeting),t.r_amznbid=this.bidConfig.r_amznbid,t.r_amzniid=this.bidConfig.r_amzniid,t.r_amznp=this.bidConfig.r_amznp),t}},{key:"newBidObject",get:function(){var t=this,e={slotID:this.bidConfig.slotID,size:this.bidConfig.amznsz,mediaType:"video"===this.bidConfig.mediaType?"v":this.bidConfig.mediaType,targeting:{},helpers:{targetingKeys:this.bidConfig.targeting,qsParams:function(){return t.targeting},encodedQsParams:function(){return encodeURIComponent(t.targeting)}}};return this.bidConfig.meta.forEach((function(n){e[n]=t.bidConfig[n]})),this.bidConfig.targeting.forEach((function(n){e.targeting[n]=t.bidConfig[n]})),-1!==this.slotID.indexOf("_")&&(e.sasTargeting=this.bidConfig.targeting.map((function(e){return"".concat(e,"_").concat(t.slotID.split("_")[1],"=").concat(t.bidConfig[e])})).join(";")),e}},{key:"slotID",get:function(){return this.bidConfig.slotID}}]),t}(),O=Object(a.f)(i.o),y=24e4;function h(t,e){var n=r.a.getState(),f={},l=Object(o.c)("host",n.hosts.DEFAULT_AAX_BID_HOST),p=n.cfg.DTB_PATH,g={src:n.config.pubID,u:Object(s.f)(window),pr:Object(s.g)(window),pid:O,cb:t.bidReqID,ws:Object(a.h)(window),v:i.j,t:e,slots:function(t){return Object(c.c)(t.map((function(t){var e;if(Object(a.m)(t,"mediaType")&&"video"===t.mediaType)e=t.aaxSlot;else{if(!(Object(a.m)(t,"sizes")&&0<t.sizes.length))return Object(u.b)({name:"SlotError",message:"There was an error with the configuration for this slot: ".concat(JSON.stringify(t.rawSlot))},"InvalidSlotError",!0),{id:"ERROR",mt:i.k.video,error:!0};var n=t.aaxSlot;Object(a.m)(t,"slotName")&&t.slotName!==t.slotID&&(r.a.dispatch({type:"ADD_SLOT_ID",slotID:t.slotID}),n.sd="".concat(r.a.getState().slotIdMap.indexOf(t.slotID)),n.sn=t.slotName),e=n}return e})).filter((function(t){return!0!==t.error})))}(t.slots),pj:function(t,e){var n=b({},Object(a.l)(t.config.params)?t.config.params:{},{},Object(a.l)(e.params)?e.params:{});return 0===Object.keys(n).length?"":Object(c.c)(n)}(n,t),cfgv:Object(s.e)(),bb:Object(s.d)(t)};if(r.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,bidReqID:t.bidReqID,timeout:e,ws:g.ws,url:g.u,rqTs:Date.now()}}),n.experiments.chunkRequests){var m=t.bidReqID.split("-");r.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:m[0],networkID:parseInt(m[1],10),timestamp:Date.now(),exchangeType:"request"})}n.config.isSelfServePub&&(g.pubid=g.src,g.src=600);var y=Object(s.c)();y.fb&&(f[917]=y.fb,g[i.h.aps_ext_917]=Object(c.c)(f));var h=Object(o.c)("bidParams");if(Object(a.l)(h)&&(g=b({},g,{},h)),Object(a.l)(n.gdpr)){var _;if(Object(a.m)(n.gdpr,"enabled")&&(g.gdpre=encodeURIComponent(n.gdpr.enabled)),Object(a.m)(n.gdpr,"consent")&&(g.gdprc=encodeURIComponent(n.gdpr.consent)),_=Object(a.m)(n.gdpr,"log")?JSON.parse(n.gdpr.log):{},Object(a.i)()){var j=window.localStorage.getItem(d.b),v=[];try{v=JSON.parse(j)}catch(t){}window.localStorage.removeItem(d.b),null!==v&&0<v.length&&(_.rtimes=v);var S=window.localStorage.getItem(d.a);null!==S&&(window.localStorage.removeItem(d.a),_.cc=S)}g.gdprl=Object(c.c)(_)}var w=Object.keys(g).filter((function(t){return Object(a.m)(g,t)&&"undefined"!==g[t]&&""!==g[t]&&null!==g[t]})).map((function(t){return"".concat(t,"=").concat(g[t])})).join("&");y.cookiesParams&&(w+=y.cookiesParams);var D="".concat(i.p).concat(l).concat(p,"/bid?").concat(w);return r.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.bidReqID,key:"urlLength",value:D.length}),D}function _(t,e){return Object(a.m)(t,"config")&&Object(a.m)(t.config,"deals")&&!0===t.config.deals||!0===e.needNewBidObject}function j(t,e){return new m({size:"0x0",crid:"",slotID:t,mediaType:"d",meta:["slotID","mediaType","size"],amznbid:e,amzniid:"",amznp:e,amznsz:"0x0",targeting:["amzniid","amznbid","amznp","amznsz"]})}function v(t,e,n){var r,o=t.map(f.c),c=e.slots.filter(f.d).map(f.c).filter((function(t){return!Object(a.j)(o,t)}));return r=n?i.r.bidInFlight:i.r.noBid,t.concat(c.map((function(t){return j(t,r)})))}function S(t){if(Object(a.m)(t,"slots")){var e=r.a.getState().slotIdMap;t.slots.forEach((function(t){null!==t.slotID.match(/^\d+$/)&&parseInt(t.slotID,10)<e.length&&(t.slotID=e[parseInt(t.slotID,10)])}))}}function w(t){if(-1!==r.a.getState().displayAdServer.noBidSlotIDs.indexOf(t.slotID))return!1;var e=r.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID}))[0];return!(Object(a.m)(e,"rqTs")&&Date.now()-e.rqTs>y||Object(a.m)(e,"url")&&!Object(a.b)(e.url,Object(s.f)(window))||t.bidState===i.b.rendered)}function D(t){var e=t.map(f.c),n=r.a.getState();return Object.keys(n.slotBids).filter((function(t){return Object(a.j)(e,t)})).reduce((function(t,e){var o=n.slotBids[e].filter((function(t){return t.bidState===i.b.new})).filter(w);if(0<o.length){var a=o[o.length-1];r.a.dispatch({type:"BID_STATE_CHANGE",slotID:e,_targetingSetID:a._targetingSetID,bidState:i.b.exposed}),t[e]=a}return t}),{})}},function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return b})),n.d(e,"d",(function(){return p}));var r=n(3),o=n(1),i=n(4),a=[],c=!1,u=[];function s(t){t._tl="aps-tag";var e=JSON.stringify(t);return e=function(t){return t.replace(/\\.{1}/g,"")}(e),encodeURIComponent(e)}function d(){var t=o.a.getState(),e=t.cfg.PIXEL_PATH,n=t.hosts.DEFAULT_AAX_PIXEL_HOST,a=Object(i.c)("pixelHost",n);return"".concat(r.p).concat(a).concat(e)}function f(t){if(c){var e=new Image;return e.src=t,u.push(e),e}return a.push(t),t}function l(t){return f("".concat(d(),"p/PH/").concat(s(t)))}function b(t,e){return f("".concat(d()).concat(t,"/").concat(s(e)))}function p(){c||(c=!0,a.forEach(f))}!0===Object(i.c)("exposePixels")&&(window.apstagPixelQueue=a,window.apstagPixelsSent=u)},function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return c}));var r=n(2);function o(t){var e=t.url,n=t.onload,o=t.onerror,i=t.ontimeout,a=t.withCredentials;try{var c=new window.XMLHttpRequest;c.onload=n.bind(null,c),void 0!==o&&(c.onerror=o),void 0!==i&&(c.ontimeout=i),void 0!==a&&(c.withCredentials=a),c.open("GET",e),c.send(null)}catch(t){Object(r.b)(t,"__xhrGet__")}}function i(t,e,n){try{if(void 0===n&&(n=document),void 0===t)return"function"==typeof e&&e(!0),!1;var o=n.getElementsByTagName("script")[0]||n.body.firstChild,i=n.createElement("script");if(i.type="text/javascript",i.async=!0,i.src=t,e&&a(i,e),null!==o.parentNode)return o.parentNode.insertBefore(i,o),!0}catch(t){Object(r.b)(t,"__loadScriptTag__",!0)}return!1}function a(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];try{return"function"==typeof e&&(t.onload=function(){e.apply(null,n)},!0)}catch(t){return Object(r.b)(t,"__addOnLoadFunction__"),!1}}function c(t){return encodeURIComponent(JSON.stringify(t))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return u}));var r=n(2),o=n(0);function i(t){var e=[];try{t.hasAdServerObjectLoaded()&&(e=t.getSlots())}catch(t){Object(r.b)(t,"getDisplayAdServerSlots")}return e}function a(t){return Object(o.m)(t,"sizes")&&Object(o.k)(t.sizes)&&0!==t.sizes.length}function c(t){return"video"!==t.mediaType}function u(t){return t.slotID}},function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return T}));var r=n(0),o=n(2);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};var s,d,f="cmpRTimesA",l="crfgL0cSt0rC",b="__cmp",p="__tcfapi",g=50,m=[1,1,3,5],O=0,y=!1,h="crfgL0cSt0r",_=50,j=!1,v="-timeout",S=null,w={};function D(t,e){if(S=null,Object(r.m)(window,t.cmpGlobalv2)&&"function"==typeof window[t.cmpGlobalv2])S="tcfv2";else{if(!Object(r.m)(window,t.cmpGlobal)||"function"!=typeof window[t.cmpGlobal])return e({error:"no-cmp"}),void(O<m.length&&(setTimeout(D,1e3*m[O],t,e),O++));S="cmp"}setTimeout(e,t.cmpTimeout,{timeout:!0},!0),s=Date.now();try{"cmp"===S?window[t.cmpGlobal]("getConsentData",null,e):window[t.cmpGlobalv2]("getTCData",2,e)}catch(t){e({error:"".concat(S,"-internal-error")}),Object(o.b)(t,"__gdpr_".concat(S,"__"),!0)}}function E(t,e,n){if(!0!==y||!Object(r.m)(e,"timeout")||!e.timeout){y=!0;try{if(Object(r.m)(e,"error"))return w.status=e.error,void I(t);if(!n||"object"!==u(e)||null===e)return w.status="".concat(S,"-error"),void I(t);if(Object(r.m)(e,"timeout")&&e.timeout)return w.status="".concat(S).concat(v),void I(t);!function(t){if(Object(r.i)())try{var e=window.localStorage.getItem(f),n=[];null!==e&&(n=JSON.parse(e)),n.push(t),window.localStorage.setItem(f,JSON.stringify(n))}catch(t){Object(o.b)(t,"__gdpr_save_time__")}}(Date.now()-s),w.status="".concat(S,"-success"),Object(r.m)(e,"tcString")?t.consent=e.tcString:Object(r.m)(e,"consentData")&&(t.consent=e.consentData),t.enabled=e.gdprApplies?1:0,0===t.enabled&&delete t.consent,function(t){try{if(!Object(r.i)())return;window.localStorage.setItem(l,"0"),!1!==j&&j.enabled===t.enabled&&j.consent===t.consent||(window.localStorage.setItem(l,"2"),window.localStorage.setItem(h,JSON.stringify({enabled:t.enabled,consent:t.consent})),!1!==j&&(w.lsStatus="".concat(S,"-override"),window.localStorage.setItem(l,"1"))),window.document.cookie="".concat(h,"=true;max-age=604800")}catch(t){return Object(o.b)(t,"__gdpr_save__")}}(t),I(t)}catch(e){return Object(o.b)(e,"__gdpr_cmp_callback__",!0),w.status="func-error",void I(t)}}}function I(t){"boolean"==typeof(t=a({},t)).enabled&&(t.enabled=t.enabled?1:0);var e=a({},t);try{Object.keys(w).forEach((function(t){"string"==typeof w[t]&&-1!==w[t].indexOf("/")&&(w[t]=encodeURIComponent(w[t]))})),e.log=JSON.stringify(w)}catch(t){Object(o.b)(t,"__gdpr_stringify_log__")}d(e)}function T(t,e){S=null,O=0,y=!(w={}),v="-timeout";try{d=Object(o.d)(e,"GdprCallback"),t="object"!==u(t)||null===t?{}:a({},t),!(w={cmpGlobal:t.cmpGlobal,cmpGlobalv2:t.cmpGlobalv2,cmpTimeout:t.cmpTimeout,enabled:t.enabled})===t.enabled?w.status="explicit-no-gdpr":!0===t.enabled&&(w.status=Object(r.m)(t,"consent")?"explicit-consent-passed":"explicit-no-consent-passed"),!1!==(j=function(){try{var t=window.localStorage.getItem(h);if(null!==t)return JSON.parse(t)}catch(t){Object(o.b)(t,"__gpdr_parse_ls__")}return!1}())&&(void 0===window.document.cookie||-1===window.document.cookie.indexOf("".concat(h,"=true"))?(j=!1,w.lsStatus="invalid"):(w.lsStatus="present",g=_,v="-timeout-cfb")),"string"!=typeof t.cmpGlobal&&(t.cmpGlobal=b),"string"!=typeof t.cmpGlobalv2&&(t.cmpGlobalv2=p),Number.isInteger(t.cmpTimeout)||(t.cmpTimeout=g);var n=t,i=function(t){var e={log:JSON.stringify(w)};return void 0===t.enabled||(!1===t.enabled?e.enabled=0:(Number.isInteger(t.enabled)?e.enabled=t.enabled:e.enabled=1,"string"==typeof t.consent&&(e.consent=t.consent))),e}(n);if(void 0!==i.enabled)return void I(i);var c={};!1!==j&&(c=a({},j)),D(n,E.bind(null,c))}catch(t){y||e({log:'{"status":"global-func-error"}'}),y=!0,Object(o.b)(t,"__gdpr_global_func__",!0)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"d",(function(){return s}));var r=0;function o(t,e){try{return"number"!=typeof t[e]?r:Math.round(t[e])}catch(t){return r}}function i(t,e){try{var n=a(t,e)[0];if(void 0!==n)return n}catch(t){}return null}function a(t,e){try{return t.performance.getEntriesByType("resource").filter((function(t){return e.test(t.name)}))}catch(t){return[]}}function c(t,e){try{var n=t.performance.timing[e];return void 0===n?r:n}catch(t){return r}}function u(t){try{if(0===["redirectStart","redirectEnd","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","secureConnectionStart"].reduce((function(e,n){return e+o(t,n)}),0))return null;var e=o(t,"fetchStart");return["domainLookupStart","domainLookupEnd","connectStart","connectEnd"].reduce((function(n,r){return n&&o(t,r)===e}),!0)}catch(t){return null}}function s(){try{var t=window.performance.timeOrigin;return void 0===t&&(t=window.performance.timing.navigationStart),t}catch(t){return r}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return g})),n.d(e,"a",(function(){return m}));var r=n(0);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(){d(this,t),b(this,"isSupported",!1),b(this,"needNewBidObject",!1)}return l(t,[{key:"cmdQueuePush",value:function(){}},{key:"slotRenderEndedEvent",value:function(){}},{key:"setTargeting",value:function(){}},{key:"getTargeting",value:function(){return[]}},{key:"clearTargeting",value:function(){}},{key:"hasAdServerObjectLoaded",value:function(){return!1}},{key:"isCommandQueueDefined",value:function(){return!1}},{key:"getSlots",value:function(){return[]}}]),t}(),g=function(){function t(e,n,r){d(this,t),b(this,"mediaType","display"),b(this,"slotID",void 0),b(this,"slotName",void 0),b(this,"slotParams",void 0),b(this,"rawSlot",void 0),this.slotID=e,this.slotName=n,this.slotParams=r}return l(t,[{key:"setTargeting",value:function(){}},{key:"getTargeting",value:function(){return[]}},{key:"clearTargeting",value:function(){}},{key:"sizes",get:function(){return[]}},{key:"slotConfig",get:function(){return{slotID:this.slotID,slotName:this.slotName,sizes:this.sizes}}},{key:"aaxSlotParams",get:function(){var t=this;return Object(r.m)(this,"slotParams")&&Object(r.l)(this.slotParams)?Object.keys(this.slotParams).filter((function(e){return function t(e){return Object(r.k)(e)?e.reduce((function(e,n){return e&&t(n)}),!0):"string"==typeof e&&0<e.length}(t.slotParams[e])})).reduce((function(e,n){return e[n]=t.slotParams[n],e}),{}):this.slotParams}},{key:"aaxSlot",get:function(){var t={sd:this.slotID,s:this.sizes.filter(r.k).map((function(t){return t.join("x")})),kv:this.aaxSlotParams};return this.slotID!==this.slotName&&(t.sn=this.slotName),t}}]),t}(),m=function(){function t(e){var n;return d(this,t),b(a(n=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?a(t):e}(this,u(t).call(this,e.slotID,e.slotName,e.slotParams))),"rawSlot",void 0),n.mediaType="video"===e.mediaType?"video":"display",n.rawSlot=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(t,g),l(t,[{key:"aaxSlot",get:function(){return"video"===this.rawSlot.mediaType?{id:this.slotID,mt:"v",kv:this.aaxSlotParams}:c(u(t.prototype),"aaxSlot",this)}},{key:"sizes",get:function(){var t=[];return Object(r.m)(this.rawSlot,"sizes")&&Object(r.k)(this.rawSlot.sizes)&&(t=0<this.rawSlot.sizes.length&&!Object(r.k)(this.rawSlot.sizes[0])?[this.rawSlot.sizes]:this.rawSlot.sizes),t}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(!i(t,["number","string"]))return!1;if(isNaN(t))return!1;if("number"==typeof t)return!0;var e=parseInt(t,10);return!isNaN(e)}(t)||void 0===t}function i(t,e){return-1!==e.indexOf(r(t))}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return g}));var r=n(0),o=n(13);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?f(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){function t(e){var n;return a(this,t),b(f(n=s(this,d(t).call(this,e.getSlotElementId(),e.getAdUnitPath()))),"rawSlot",void 0),b(f(n),"mediaType","display"),n.rawSlot=e,n}return l(t,o.c),u(t,[{key:"setTargeting",value:function(t,e){this.rawSlot.setTargeting(t,e)}},{key:"getTargeting",value:function(t){return this.rawSlot.getTargeting(t)}},{key:"clearTargeting",value:function(t){this.rawSlot.clearTargeting(t)}},{key:"sizes",get:function(){try{var t=Object(r.h)(window).split("x").map((function(t){return Number(t)}));return this.rawSlot.getSizes(t[0],t[1]).filter((function(t){return"fluid"!==t})).map((function(t){return[t.getWidth(),t.getHeight()]}))}catch(t){}return[]}}]),t}(),g=function(){function t(){var e,n;a(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return b(f(n=s(this,(e=d(t)).call.apply(e,[this].concat(o)))),"isSupported",!0),n}return l(t,o.b),u(t,[{key:"cmdQueuePush",value:function(t){window.googletag.cmd.push(t)}},{key:"slotRenderEndedEvent",value:function(t){window.googletag.pubads().addEventListener("slotRenderEnded",(function(e){var n=new p(e.slot);t(n)}))}},{key:"setTargeting",value:function(t,e){window.googletag.pubads().setTargeting(t,e)}},{key:"getTargeting",value:function(t){return window.googletag.pubads().getTargeting(t)}},{key:"clearTargeting",value:function(t){window.googletag.pubads().clearTargeting(t)}},{key:"hasAdServerObjectLoaded",value:function(){return Object(r.m)(window,"googletag")&&Object(r.m)(window.googletag,"apiReady")&&!0===window.googletag.apiReady}},{key:"isCommandQueueDefined",value:function(){return Object(r.m)(window,"googletag")&&Object(r.m)(window.googletag,"cmd")}},{key:"getSlots",value:function(){return window.googletag.pubads().getSlots().map((function(t){return new p(t)}))}}]),t}()},function(t,e,n){"use strict";function r(t){return void 0!==t.amzniid}function o(t){return void 0!==t.kvMap}function i(t){return void 0!==t.html&&void 0!==t.ev&&void 0!==t.amzniid}n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(2),o=n(0);function i(t){return!(!Object(o.m)(t,"$sf")||!Object(o.m)(t.$sf,"ext"))}function a(t,e){try{var n=e.innerWidth,o=e.innerHeight,i=parseInt(t[0],10),a=parseInt(t[1],10),c=i-n,u=a-o,s=e.sfAPI||e.$sf.ext;s&&(n===i&&o===a||(s.register(i,a),s.expand({r:c,b:u,push:!0})))}catch(t){Object(r.b)(t,"__error-expandSF__")}}function c(t){return 1===t.innerWidth&&1===t.innerHeight}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(3),o=n(0);function i(t){return Object(o.m)(t,"debug")}function a(t){return!!Object(o.m)(t,r.a)&&!0===t[r.a]}},,,,function(t,e,n){t.exports=n(23)},function(t,e,n){"use strict";n.r(e);var qt=n(11),Nt=n(1),Mt=n(6),Ut=n(0),Gt=n(10),Ft=n(4),Qt=n(3),Xt=n(12),Ht=n(17),Vt=n(8),Kt=n(2),Jt=n(9),Wt=n(15),r=n(18),Yt=n(5),$t=n(7),Zt=n(13),te=n(16),ee=n(14);function ne(t){return a(t)||i(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(n,!0).forEach((function(e){oe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}try{var u=Object(r.b)(window.apstag);u?Object(Kt.b)(new Error("apstag has already loaded - preventing duplicate load"),"__error-apstag_duplicate_load__",!0):(Object(r.a)(window)&&Object(Kt.b)(new Error("apstag was loaded and then destroyed"),"__error-apstag-destroyed-reloaded__",!0),window.apstagLOADED=!0,function(){var r=Object(Xt.e)(window,"navigationStart"),t="ls",e=Object(Ft.d)("console")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=1")&&(t="url",!0)}catch(t){return!1}}(),n=Object(Ft.d)("console_v2")||function(){try{return-1!==window.location.href.indexOf("amzn_debug_console=2")&&(t="url",!0)}catch(t){return!1}}();function o(t){t.ts=Date.now(),Nt.a.dispatch({type:"LOG_EVENT",event:t})}function i(t){function e(t){if(!Nt.a.getState().cmpFired){Nt.a.dispatch({type:"CMP_FIRED"});var e=document.createElement("iframe");e.style.display="none",e.src=t,document.body.appendChild(e)}}"loading"===document.readyState?document.addEventListener&&document.addEventListener("DOMContentLoaded",(function(){e(t)}),!1):e(t)}function a(t){try{var e=Nt.a.getState().cfg.COOKIE_MATCH_DELAY;setTimeout((function(){try{Object(Ut.m)(t,"cmp")?i(t.cmp):Object(Ut.m)(t,"cmpjs")&&Object(Jt.b)(t.cmpjs)}catch(t){Object(Kt.b)(t,"__error-tryCookieMatch-1__")}}),e)}catch(t){Object(Kt.b)(t,"__error-tryCookieMatch-2__")}}function c(t){return!Nt.a.getState().experiments.chunkRequests||0===Nt.a.getState().bidReqs[t.split("-")[0]].networkReqs.filter((function(t){return t.inFlight})).length}function u(t,e){!Nt.a.getState().bidReqs[t].hasCallbackExecuted&&c(t)&&(Nt.a.dispatch({type:"RECORD_CALLBACK",fid:t}),e())}function s(t){Nt.a.getState().experiments.chunkRequests&&Nt.a.dispatch({type:"RECORD_NETWORK_EXCHANGE",fid:t[0],timestamp:Date.now(),exchangeType:"response",networkID:parseInt(t[1],10)})}function d(t,r,e){var o=e.split("-"),n={url:t,withCredentials:!0,onload:function t(e){s(o);var n=e.responseText;eval(n),u(o[0],r)},onerror:function(){s(o),u(o[0],r)}};try{Object(Jt.d)(n)}catch(t){Object(Kt.b)(t,"__error-xhrBid__",!0),s(o),u(o[0],r)}}function f(t){var e=new Date;return e.setTime(e.getTime()+1e3*t),e.toUTCString()}function l(t){try{Object(Ut.m)(t,"cr")&&t.cr.forEach((function(t){document.cookie="".concat(t.k,"=").concat(t.v,";expires=").concat(-1!==t.exp?f(t.exp):Object(Ut.g)(365),";path=/;")}))}catch(t){Object(Kt.b)(t,"__error-setFirstPartyCookies__")}}function b(t){if(Object(Ut.m)(t,"cb")){Nt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"resTs",value:Date.now()});var e=new RegExp("e/dtb/bid.*cb=".concat(t.cb));Nt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:t.cb,key:"perf",value:Object(Xt.c)(window,e)})}Object(Ut.m)(t,"cfg")&&Nt.a.dispatch({type:"SET_CFG",cfg:t.cfg}),K(t)}function p(t){if(a(t),l(t),Object(Ut.m)(t,"cfg")&&localStorage.setItem(Qt.c,JSON.stringify(t.cfg)),Object(Ut.m)(t,"st")&&-1!==t.st.indexOf(917)&&Nt.a.getState().sync917){Nt.a.dispatch({type:"SET_SYNC_917",value:!1});try{k()}catch(t){Object(Kt.b)(t,"__error-doFbSync__")}}g(t),Object(Mt.i)(t)||Object(Vt.d)()}function g(t){if(Object(Ut.m)(t,"fp")){var e=t.fp;Object(Ut.m)(e,"length")&&e.forEach((function(t){var e=t.d?t.d:0;setTimeout((function(){Object(Vt.c)(t.s)}),e)}))}}function m(){Nt.a.getState().Q.forEach((function(t){"i"===t[0]?window.apstag.init.apply(null,t[1]):window.apstag.fetchBids.apply(null,t[1])}))}function O(t){Object(ee.b)(t.pubID,["string","number"])?"number"==typeof t.pubID&&(t.pubID="".concat(t.pubID)):Object(Kt.c)("init.config.pubID",ie(t.pubID),"string"),Object(ee.b)(t.adServer,["undefined","string"])||Object(Kt.c)("init.config.adServer",ie(t.adServer),"string"),Object(ee.a)(t.bidTimeout)||("string"==typeof t.bidTimeout?Object(Kt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.bidTimeout was a non-numeric string '".concat(t.bidTimeout,"'")},"TypeError-init.config.bidTimeout",!0):Object(Kt.c)("init.config.bidTimeout",ie(t.bidTimeout),"number")),Object(ee.b)(t.gdpr,["undefined","object"])?"object"===ie(t.gdpr)&&(Object(ee.a)(t.gdpr.cmpTimeout)||(Object(ee.b)(t.gdpr.cmpTimeout,["string","undefined"])?Object(Kt.b)({name:"string-".concat(t.bidTimeout),message:"init.config.gdpr.cmpTimeout was a non-numeric string '".concat(t.gdpr.cmpTimeout,"'")},"TypeError-init.config.gdpr.cmpTimeout",!0):Object(Kt.c)("init.config.gdpr.cmpTimeout",ie(t.gdpr.cmpTimeout),"number"))):Object(Kt.c)("init.config.gdpr",ie(t.gdpr),"object"),Object(Ut.m)(t,"params")&&!Object(Ut.l)(t.params)?Object(Kt.c)("init.config.params",ie(t.params),"object"):Object(Ut.m)(t,"params")&&Object.keys(t.params).forEach((function(e){return"string"==typeof t.params[e]||"number"==typeof t.params[e]||(Object(Ut.k)(t.params[e])?!!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||(Object(Kt.b)({name:"non-string array item",message:"'init.config.params.".concat(e," contains a non-string item")},"TypeError-init.config.params.".concat(e),!0),!1):(Object(Kt.c)("init.config.params.".concat(e),ie(t.params[e]),"string' or 'array"),!1))})),Object(Ut.m)(t,"blockedBidders")&&!Object(Ut.k)(t.blockedBidders)?Object(Kt.c)("init.config.blockedBidders",ie(t.blockedBidders),"array"):Object(Ut.m)(t,"blockedBidders")&&Object(Ut.k)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(Kt.b)({name:"non-string array item",message:"'init.config.blockedBidders contains a non-string item"},"TypeError-init.config.blockedBidders",!0)),Object(ee.b)(t.simplerGPT,["undefined","boolean"])||Object(Kt.c)("init.config.simplerGPT",ie(t.simplerGPT),"boolean"),Object(ee.b)(t.deals,["undefined","boolean"])||Object(Kt.c)("init.config.deals",ie(t.deals),"boolean");var e=Nt.a.getState().config;Object(Ut.m)(e,"pubID")&&Object(Ut.m)(t,"pubID")&&e.pubID!==t.pubID&&Object(Kt.b)(new Error("`apstag.init` was called multiple times with different pubIDs (".concat(e.pubID," then ").concat(t.pubID,")")),"__error-init-multiple-calls__",!0),Nt.a.dispatch({type:"SET_GDPR_CONFIG",config:null}),Nt.a.dispatch({type:"SET_CONFIG",config:t,defaultCmpTimeout:Nt.a.getState().cfg.GDPR_CMP_TIMEOUT})}function y(t){var e=t.slotID;Object(Ut.m)(t.bidConfig,"mediaType")&&"v"===t.bidConfig.mediaType||(Yt.a.hasAdServerObjectLoaded()?Yt.a.isCommandQueueDefined()?Yt.a.hasAdServerObjectLoaded()?null!==h(e)?R(t):Object(Kt.a)("".concat(e," isn't defined when trying to set amazon bid!")):Yt.a.cmdQueuePush((function(){y(t)})):Object(Kt.a)("displayAdServer Object's cmd queue hasn't been defined",!0):Object(Kt.a)("displayAdServer Object hasn't been defined",!0))}function h(t){var e=null;try{e=Object(Gt.b)(Yt.a).filter((function(e){return e.slotID===t}))[0]||null}catch(e){Object(Kt.b)(e,"__error-getAdServerSlot__")}return e}function _(t){try{var e=Nt.a.getState().targetingKeys[t.slotID];Yt.a.hasAdServerObjectLoaded()&&Object(Ut.k)(e)&&e.forEach((function(e){return 0<t.getTargeting(e).length&&t.clearTargeting(e)}))}catch(e){Object(Kt.b)(e,"__error-clearTargetingFromSlot__")}}function j(t){try{if(Object(Ut.m)(Nt.a.getState().slotBids,t.slotID)){var e=Nt.a.getState().slotBids[t.slotID].filter((function(t){return t.bidState===Qt.b.set}))[0];e&&e.bidState===Qt.b.set&&Nt.a.dispatch({type:"BID_STATE_CHANGE",slotID:t.slotID,_targetingSetID:e._targetingSetID,bidState:Qt.b.exposed})}}catch(t){Object(Kt.b)(t,"__error-clearbidSetOnSlot__")}}function v(t,e){return t.map((function(t){return Object(Ut.j)(e,t)})).filter((function(t){return t})).length===t.length}function S(){var t={};try{Object.keys(Nt.a.getState().slotBids).forEach((function(e){var n=Nt.a.getState().slotBids[e].filter($t.g);0<n.length&&(t[e]=n.map((function(t){return{rqTs:Nt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.bidReqID}))[0].rqTs,bid:t}})).reduce((function(t,e){return t.rqTs>e.rqTs?t:e})).bid)}))}catch(t){Object(Kt.b)(t,"__error-getCurrentSlotBids__")}return t}function w(t,e){return Object(Ut.k)(Nt.a.getState().targetingKeys[t])?e?["amzniid_sp"]:Nt.a.getState().targetingKeys[t].filter((function(t){return-1<t.indexOf("amzniid")&&t.indexOf("amzniid_sp")<0})):["amzniid"]}function D(t,e){var n,r;try{var o=Nt.a.getState().slotBids;Object.keys(o).forEach((function(i){o[i].forEach((function(o){w(i,e).forEach((function(e){o.bidConfig[e]===t&&(n=o,"amzniid_sp"===e?r="sp":"amzniid"!==e&&(r=e.substr(0,e.indexOf("amzniid"))))}))}))}))}catch(t){Object(Kt.b)(t,"__error-findSlotBidByBidID__",!0)}return{slotBid:n,dealId:r}}function E(t,e,n){var r="";return e.bidConfig[n+"amzniid"]===t&&(r=n.split("_").pop().trim()),r}function I(t){if(void 0===t.slots)return[];var e={};return t.slots.forEach((function(t){"video"!==t.mediaType?e[t.slotID]=new $t.a(t):(0<=t.slotID.indexOf("rsv-")&&(t={slotID:t.slotID.substring(4),r_amznbid:t.amznbid,r_amzniid:t.amzniid,r_amznp:t.amznp,mediaType:"video",targeting:["r_amznbid","r_amzniid","r_amznp"],amznsz:t.amznsz,size:t.size,crid:t.crid,meta:t.meta}),Object(Ut.m)(e,t.slotID)?t.targeting.forEach((function(n){e[t.slotID].bidConfig[n]=t[n],-1===e[t.slotID].bidConfig.targeting.indexOf(n)&&e[t.slotID].bidConfig.targeting.push(n)})):e[t.slotID]=new $t.a(t))})),Object.keys(e).map((function(t){return e[t]}))}function T(t){var e=I(t),n=[];try{n=e.map((function(e){return e.bidReqID=t.cb,e.host=t.host,e.ev=t.ev,e.cfe=t.cfe,e}))}catch(e){Object(Kt.b)(e,"__error-convertAaxResponse__")}return n}function R(t){try{var e=t.slotID,n=t._targetingSetID,r=t.bidConfig.targeting?t.bidConfig.targeting:zt("display");if(t.bidState===Qt.b.set)return;var o=h(e);null!==o&&(j(o),Object.keys(t.bidConfig).filter((function(t){return Object(Ut.j)(r,t)})).forEach((function(e){return o.setTargeting(e,t.bidConfig[e])})),Nt.a.dispatch({type:"BID_STATE_CHANGE",slotID:e,_targetingSetID:n,bidState:Qt.b.set,ts:Date.now()}))}catch(e){Object(Kt.b)(e,"__error-applyTargetingToAdServerSlot__")}}function A(t){var e=S();t.forEach((function(t){e[t]&&y(e[t])}))}function C(){var t=S();Object.keys(t).forEach((function(e){return y(t[e])}))}function P(t){try{t?A(t):C(),Nt.a.getState().displayAdServer.slotRenderEndedSet||(Yt.a.cmdQueuePush((function(){Yt.a.slotRenderEndedEvent((function(t){_(t),j(t)}))})),Nt.a.dispatch({type:"SLOT_RENDER_ENDED_SET"}))}catch(t){Object(Kt.b)(t,"__error-applySlotTargeting__",!0)}}function k(){var t=197,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="1881141382166183",r="https://www.facebook.com/audiencenetwork/token/update";function o(t){var e=JSON.parse(t),n=e.fbToken,r=new Date(parseInt(e.expAfter,10)).toUTCString();document.cookie="aps_ext_917=".concat(n,"; expires=").concat(r)}function i(n){!function(t,e,n){!function(t,e){var n={url:t,withCredentials:!0,onload:function(t){return e(t.responseText)}};try{Object(Jt.d)(n)}catch(t){Object(Kt.b)(t,"__error-fbTokenRequest__")}}(function(t,e){return"".concat(r,"?partner=").concat(encodeURIComponent(t),"&vr_token=").concat(encodeURIComponent(e))}(t,e),n)}(n,function(){for(var n="VR_",r=0;r<t;++r)n+=e.charAt(Math.floor(Math.random()*e.length));return n}(),o)}"complete"===document.readyState?i(n):window.addEventListener("load",(function(){i(n)}))}function z(t,e){function n(){if(!r)if(20<=o++)Object(Kt.b)({name:"LoopError",message:"Too many attempts to append to document.body"},"__error-safeDocumentBodyAppendChild-loops__",!0);else{try{if(t&&t.body&&null!==t.body&&"function"==typeof t.body.appendChild)return t.body.appendChild(e),void(r=!0)}catch(t){Object(Kt.b)(t,"__error-safeDocumentBodyAppendChild-callback__")}setTimeout(n,100)}}var r=!1,o=0;try{"complete"===t.readyState||"interactive"===t.readyState?n():t.addEventListener("DOMContentLoaded",n)}catch(t){Object(Kt.b)(t,"__error-safeDocumentBodyAppendChild-outer__")}}function x(t){var e,n;return e="".concat(t.host).concat(Nt.a.getState().cfg.DTB_PATH,"/imp"),n="".concat(t.host).concat(Nt.a.getState().cfg.DTB_PATH,"/adm"),t.cfe||t.isAmp?n:e}function L(t){var e,n="?b=".concat(t.bidID,"&rnd=").concat(Object(Ut.e)());return Object(Ut.m)(t,"pp")&&(n+="&pp=".concat(t.pp)),Object(Ut.m)(t,"amznp")&&(n+="&p=".concat(t.amznp)),Object(Ut.m)(t,"crID")&&(n+="&crid=".concat(t.crID)),Object(Ut.m)(t,"isSharedPMP")&&!0===t.isSharedPMP&&(n+="&sp=true"),e=x(t),t.fif?"".concat(e,"j").concat(n):"".concat(e,"i").concat(n)}function B(t){var e=t.doc.createElement("iframe");return e.frameBorder="0",e.marginHeight="0",e.marginWidth="0",e.style.marginTop="0",e.style.marginLeft="0",e.scrolling="no",e.width="".concat(t.sizes[0],"px"),e.height="".concat(t.sizes[1],"px"),e}function q(t){try{if(Object(Ut.m)(t,"bidType")){var e=t.kvMap;switch(t.bidType){case"sharedPMP":return{bidID:e.amzniid_sp[0],pp:e.amznbid_sp[0],sizes:e.amznsz_sp[0].split("x"),amznp:e.amznp_sp[0],isSharedPMP:t.isSharedPMP};case"preferredPMP":if(Object(te.b)(t)&&Object(Ut.m)(t,"amzndeal")){var n=t.amzndeal.split("_").pop().trim();return{bidID:e["".concat(t.amzndeal,"amzniid")][0],sizes:vt(n)}}break;case"openAuction":if(Object(te.b)(t)&&Object(Ut.m)(t,"kvMap"))return{bidID:e.amzniid[0],pp:Object(Mt.b)(e.amznbid[0]),amznp:e.amznp[0],sizes:e.amznsz[0].split("x")};if(Object(te.c)(t))return{bidID:t.amzniid,pp:Object(Mt.b)(t.amznbid),amznp:t.amznp,sizes:t.amznsz.split("x")};break;default:Object(Kt.b)({name:"Invalid AMP Bid Type: ".concat(t.bidType),message:"No valid AMP bid type"},"__error-ampBidAuctionTypeSelectionDefaultBlock__")}}}catch(t){Object(Kt.b)(t,"__error-getAmpAdData__")}return{bidID:"ERROR",sizes:[]}}function N(t,e){try{var n=null;if(void 0!==e&&Object(Ut.m)(e,"ampEnv")&&e.ampEnv&&(n=e,Object(Ut.m)(e,"bidType")&&"sharedPMP"===e.bidType?n.isSharedPMP=!0:n.isSharedPMP=!1,n.document=t,n.amznhost=n.kvMap.amznhost[0]),_t(t)&&((n=t).bidType="openAuction",n.ampEnv=!0),null===n)return void Object(Kt.b)(new Error("Invalid AMP parameters"),"__error-invalid_amp_params__",!0);var r=q(n);if("ERROR"===r.bidID)return;if(r.doc=n.document,r.host=n.amznhost.replace("http://","https://"),r.adID="amznad".concat(Object(Ut.e)()),r.isAmp=n.ampEnv,r.isSf=Object(Ht.c)(window),Nt.a.getState().aaxViewabilityEnabled)return void Dt(r,r.doc);U(r)}catch(t){Object(Kt.b)(t,"__error-renderAmpImpression__")}}function M(t){try{var e=B(t=re({hasRendered:!1,hasStartedRender:!1},t));e.id="apstag-f-iframe-".concat(Object(Ut.e)()),e.setAttribute("srcdoc",t.html),e.src='javascript: window.frameElement.getAttribute("srcdoc");',z(t.doc,e)}catch(t){Object(Kt.b)(t,"__error-loadAdIntoFriendlyIframe__",!0)}}function U(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!1}},n=2<arguments.length?arguments[2]:void 0;try{var r=B(t);if(r.id=t.adID,r.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),Object(Ft.d)("fake_bids")){var o='<body style="background-color: #FF9900;">'.concat(50<parseInt(t.sizes[1],10)?"<h3>apstag Test Creative</h3>":"","<h4>amzniid - ").concat(t.bidID," | amznbid: ").concat(t.pp," | size: ").concat(t.sizes.join("x"),"</h4></body>");r.src="javascript:'".concat(o,"'")}else r.src=L(t);t.isAmp&&t.isSf&&Object(Ht.b)(window)&&Object(Ht.a)(t.sizes,window),z(t.doc,r),(e.iframe=r).onload=function(){e.states.iframeLoaded=!0,n&&n()}}catch(t){Object(Kt.b)(t,"__error-loadAdIntoUnfriendlyIframe__",!0)}}function G(t){var e,n=t.states,r=t.doc,o=t.bidID,i=t.iframe;Object(Ut.a)(n)||(n.shouldRunViewability=!1,Object(Ut.m)(window,"amzncsm")?e=window.amzncsm:void 0!==r&&null!==r.defaultView&&Object(Ut.m)(r.defaultView,"amzncsm")&&(e=r.defaultView.amzncsm),void 0!==r&&void 0!==e&&Object(Ut.m)(e,"rmD")&&(e.host=Object(Ft.c)("host",Nt.a.getState().hosts.DEFAULT_AAX_PIXEL_HOST),e.rmD(i,o,r.defaultView,r,Nt.a.getState().config.pubID)))}function F(t,e){return function(n){var r=Object($t.f)(e.slots),o=Object.keys(r),i=[];n&&(Nt.a.dispatch({type:"RECORD_AAX_REQ_PROP",bidReqID:e.bidReqID,key:"timedOutAt",value:Date.now()}),Nt.a.getState().experiments.chunkRequests&&Nt.a.dispatch({type:"RECORD_TIMEOUT",fid:e.bidReqID,timeOut:Date.now()})),o.forEach((function(t){if(Object(Ut.m)(r,t)){var e=r[t];Object($t.h)(Nt.a.getState(),Yt.a)||Object(Ut.m)(e.bidConfig,"amznbid")?Object(Ut.m)(e.bidConfig,"amznp")||(e.bidConfig.amznp=""):e=Object($t.e)(e.slotID,Qt.r.noBid),i.push(e)}})),Yt.a.isSupported&&(i=Object($t.c)(i,e,n));var a={fromTimeout:n},c=Object($t.h)(Nt.a.getState(),Yt.a);t(i.map((function(t){return c?t.newBidObject:t.bidObject})),a)}}function Q(t,e){try{var n;(n=t.defaultView&&t.defaultView.frameElement?t.defaultView.frameElement:window.frameElement).width=e[0],n.height=e[1]}catch(t){Object(Kt.b)(t,"__error-resizeIframe__")}}function X(t){return"".concat(t[0],"x").concat(t[1])}function H(t){return 1===t.length?X(t[0]):X(t[Math.floor(t.length*Math.random())])}function V(t,e){var n,r=Object(Ft.c)("host",Nt.a.getState().hosts.DEFAULT_AAX_BID_HOST),o=Object(Mt.f)(window),i=t.bidReqID,a=Object(Ut.h)(window),c=Object(Ft.c)("testBidTimeout",200);Nt.a.dispatch({type:"RECORD_AAX_REQUEST",data:{bidConfig:t,timeout:c,bidReqID:i,ws:a,url:o,rqTs:Date.now()}}),n=t.slots.map((function(t){var e,n=H(t.sizes),r="testDeal".concat(Object(Ut.e)(),"_").concat(n),o="testDealIi-".concat(Object(Ut.e)()),i=H(t.sizes),a=(oe(e={slotID:t.slotID,crid:"".concat(Qt.m.crid,"-").concat(Object(Ut.e)()),size:i,amzniid:"".concat(Qt.m.amzniid,"-").concat(Object(Ut.e)()),amznbid:Qt.m.amznbid,amznp:Qt.m.amznp,amznsz:i,amzniid_sp:"".concat(Qt.m.amzniid,"-").concat(Object(Ut.e)()),amznbid_sp:"".concat(Qt.m.amznbid,"SP"),amznp_sp:"".concat(Qt.m.amznp,"SP"),amznsz_sp:H(t.sizes),amzndeals:[r]},"".concat(r,"amzniid"),o),oe(e,"mediaType","d"),oe(e,"meta",["slotID","mediaType","size"]),oe(e,"targeting",["amzniid","amznbid","amznp","amznsz","amzniid_sp","amznbid_sp","amznp_sp","amznsz_sp","amzndeal_sp","amzndeals","".concat(r,"amzniid")]),e);"video"===t.mediaType&&(a.mediaType="video",a.amznbid="v_".concat(a.amznbid));var c=new $t.a(a);return Object($t.h)(Nt.a.getState(),Yt.a)?c.newBidObject:c.bidObject})),setTimeout((function(){window.apstag.bids({slots:n,host:r,status:"ok",cb:i}),e(!0)}),c)}function K(t){var e=Nt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t.cb}))[0];if(e&&e.bidConfig&&e.bidConfig.slots){var n=e.bidConfig.slots.filter(Gt.d).map((function(t){return t.slotID})),r=Object(Ut.m)(t,"slots")?t.slots.map((function(t){return t.slotID})):[],o=n.filter((function(t){return!Object(Ut.j)(r,t)}));Nt.a.dispatch({type:"NO_BID_ON_ADSERVER_SLOTS",slotIDs:o}),Yt.a.hasAdServerObjectLoaded()?Y():Yt.a.isCommandQueueDefined()&&Yt.a.cmdQueuePush((function(){Y()}))}}function J(t){return Object(Ut.j)(Nt.a.getState().AAXReqs.filter((function(t){return!t.resTs})).map((function(t){return t.bidConfig.slots})).reduce((function(t,e){return t.concat(e)}),[]).map(Gt.c),t)}function W(t){var e=t.getTargeting("amznbid");return 0<e.length&&2<e[0].length}function Y(){Yt.a.hasAdServerObjectLoaded()&&"1"===Yt.a.getTargeting("amznbid")[0]&&Z(),Object(Gt.b)(Yt.a).forEach((function(t){!Object(Ut.j)(Nt.a.getState().displayAdServer.noBidSlotIDs,t.slotID)||J(t.slotID)||W(t)||"2"===t.getTargeting("amznbid")[0]||$("noBid",t)}))}function $(t,e){Qt.s.forEach((function(n){return e.setTargeting(n,Qt.r[t])}))}function Z(){Qt.s.forEach((function(t){return Yt.a.clearTargeting(t)}))}function tt(t){var e={_type:"dupePixel",dd:Date.now()-t.timing.renderTime};Object(Vt.a)(t.bidConfig.amzniid,e)}function et(){var t=Object(Xt.c)(window,new RegExp("aax2/apstag.js"));if(null!==t){var e={_type:"libLatency",pid:$t.b,ns:r,fs:Object(Xt.a)(t,"fetchStart"),re:Object(Xt.a)(t,"responseEnd")},n=Object(Xt.f)(t);null!==n&&(e.c=n?1:0),setTimeout(Vt.b,1e3,e)}}!function(){if(Object(Ut.i)()){var t=localStorage.getItem(Qt.c);if(t){var e=JSON.parse(t);null!==e&&Nt.a.dispatch({type:"SET_CFG",cfg:e})}}}();var nt=0,rt;function ot(){Object(Ut.m)(window,"googletag")&&Object(Ut.m)(window.googletag,"cmd")?(new Wt.a).cmdQueuePush((function(){window.googletag.pubads().addEventListener("slotRequested",(function(t){try{var e=t.slot;Nt.a.dispatch({type:"LOG_GAM_EVENT",event:Object.assign({},new Wt.b(e).slotConfig,{ts:Date.now(),targeting:e.getTargetingMap()})})}catch(t){Object(Kt.b)(t,"__error-latency-parse-event__")}}))})):++nt<5&&setTimeout(ot,100)}function it(t){var e=t.AAXReqs.slice(t.gamSlotRenderPixel.aaxReqOffset).reduce((function(t,e){return t.concat(e.bidConfig.slots)}),[]).map((function(t){return Object.assign({},t,{type:"a"})})).filter((function(t){return"video"!==t.mediaType})),n=t.gamSlotFetchLog.slice(t.gamSlotRenderPixel.gamSlotFetchLogOffset).map((function(t){return Object.assign({},t,{type:"g"})})),r=[].concat(ne(e),ne(n)).reduce((function(t,e){return void 0===t[e.slotID]&&(t[e.slotID]={sd:e.slotID,a:{c:0},g:{c:0}}),t[e.slotID][e.type].c++,t[e.slotID][e.type].s=e.sizes,t[e.slotID][e.type].sn=e.slotName||"",t}),{});return Object.keys(r).map((function(t){return r[t]})).filter((function(t){return 0!==t.a.c||0!==t.g.c}))}function at(){var t=Nt.a.getState(),e=it(t);0<Object.keys(e).length&&(Object(Ut.c)(e,5).forEach((function(e){var n={slots:e,pid:$t.b,url:Object(Mt.f)(window).split("?")[0],ws:Object(Ut.h)(window),pubid:t.config.pubID,_type:"slotRenders"};Object(Vt.b)(n)})),Nt.a.dispatch({type:"UPDATE_RENDER_OFFSETS",offsets:{aaxReqOffset:t.AAXReqs.length,gamSlotFetchLogOffset:t.gamSlotFetchLog.length}}))}function ct(){setInterval((function(){at()}),5e3)}function ut(){try{setTimeout((function(){var t=lt().filter((function(t){return!Object(Ut.m)(Nt.a.getState().bsPixels,t.iid)||t.state!==Nt.a.getState().bsPixels[t.iid]}));t&&t.length&&0<t.length&&(t.forEach((function(t){return Object(Vt.a)(t.iid,dt(t))})),st(t));var e={fetchStart:"a",domainLookupStart:"b",domainLookupEnd:"c",connectStart:"d",secureConnectionStart:"e",connectEnd:"f",requestStart:"g",responseStart:"h",responseEnd:"i"};Object.keys(Nt.a.getState().slotBids).forEach((function(t){Nt.a.getState().slotBids[t].forEach((function(n){if(Object(Ut.m)(n.bidConfig,"amzniid")&&!n.pixelSent){var r=Nt.a.getState().AAXReqs.filter((function(t){return t.bidReqID===n.bidReqID}))[0];if("object"===ie(r)&&null!==r){var o=r.rqTs-Object(Xt.d)(),i={pid:$t.b,lv:Qt.j,ns:r.bidConfig.slots.length,fid:n.bidReqID,fbrq:r.rqTs,_type:"latencyBd"};"object"===ie(r.perf)&&null!==r.perf&&Object.keys(e).forEach((function(t){Object(Ut.m)(r,"perf")&&0!==Object(Xt.a)(r.perf,t)&&(i[e[t]]=Object(Xt.a)(r.perf,t)-o)})),i.j=r.resTs-r.rqTs,Object(Vt.a)(n.bidConfig.amzniid,i),Nt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:t,iid:n.bidConfig.amzniid,key:"pixelSent",value:!0})}}}))})),ut()}),5e3)}catch(t){Object(Kt.b)(t,"__error-bidSetPixel__")}}function st(t){t.forEach((function(t){return Nt.a.dispatch({type:"RECORD_BID_INFO_SENT",bidInfo:t})}))}function dt(t){var e=ft(t.fid),n={status:t.state,pubid:Nt.a.getState().config.pubID,lv:Qt.j,_type:"bidSetPixel",toa:Object(Ut.m)(e.req,"timedOutAt")?e.req.timedOutAt:0,fbrq:e.req.rqTs,pto:e.req.timeout,ns:e.req.bidConfig.slots.length,bla:e.req.resTs-e.req.rqTs,reqindex:e.index,fid:t.fid};Nt.a.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION&&(n.eid=Nt.a.getState().experiments.chunkRequests?2:1,n.fbindex=e.fbIndex,n.fbns=Nt.a.getState().bidConfigs[parseInt(t.fid.split("-")[0],10)].slots.length),t.delta&&(n.delay=t.delta);try{var r=e.req.perf;void 0!==r&&(n.ul=e.req.urlLength,n.es=Object(Xt.a)(r,"encodedBodySize"))}catch(t){Object(Kt.b)(t,"__error-mapBidInfoToPixel-size__")}return n}function ft(t){var e=Nt.a.getState().AAXReqs.filter((function(e){return e.bidReqID===t}))[0],n=Nt.a.getState().AAXReqs.indexOf(e)+1,r={req:e,index:n,fbIndex:n};return r.index=Nt.a.getState().AAXReqs.indexOf(r.req)+1,Nt.a.getState().experiments.chunkRequests&&(r.fbIndex=Nt.a.getState().AAXReqs.filter((function(t){return-1===t.bidReqID.indexOf("-")||"0"===t.bidReqID.split("-")[1]})).map((function(t){return t.bidReqID.split("-")[0]})).indexOf(t.split("-")[0])+1),r}function lt(){var t=mt(),e=[];return null===t||Object.keys(Nt.a.getState().slotBids).forEach((function(n){"video"!==Nt.a.getState().slotBids[n][0].bidConfig.mediaType&&Nt.a.getState().slotBids[n].filter((function(t){return Object(Ut.m)(t.bidConfig,"amzniid")})).forEach((function(r){if(null!==t){var o={state:-1,slotID:n,iid:r.bidConfig.amzniid,fid:r.bidReqID},i=[],a=[];if(n in t&&(i=t[n].fetchedAt.filter((function(t){return t.AAXReqInfo&&t.AAXReqInfo.bidReqID===r.bidReqID})),a=t[n].targetedAt.filter((function(t){return t.targeting===r.bidConfig.amzniid}))),0<i.length?0<i.length&&a.length>=i.length&&i.slice(i.length-1)[0].ts>a.slice(i.length-1)[0].ts?1===t[n].fetchWithIID.filter((function(t){return t===r.bidConfig.amzniid})).length?o.state=1:o.state=4:-1!==t[n].fetchWithIID.indexOf(r.bidConfig.amzniid)?o.state=3:o.state=2:o.state=0,1===o.state||2===o.state){var c=Nt.a.getState().AAXReqs.filter((function(t){return t.bidReqID===r.bidReqID}))[0].resTs,u=bt(c,t[n].fetchedAt,2===o.state);u&&Object(Ut.m)(u,"ts")&&(o.delta=c-u.ts)}e.push(o)}}))})),e}function bt(t,e,n){var r=e.map((function(e){var r=t-e.ts;return!n&&r<=0?-r:n&&0<=r?r:null}));return e[pt(r)]}function pt(t){for(var e=-1,n=-1,r=0;r<t.length;r++)null!==t[r]&&(-1===n||t[r]<e)&&(e=t[n=r]);return n}function gt(t,e){return Nt.a.getState().AAXReqs.filter((function(t){return-1!==t.bidConfig.slots.map((function(t){return t.slotID})).indexOf(e)}))[t]}function mt(){if(!Yt.a.hasAdServerObjectLoaded())return null;var t=Nt.a.getState().gamSlotFetchLog.reduce((function(t,e){Object(Ut.m)(t,e.slotID)||(t[e.slotID]={fetchedAt:[],targetedAt:[]});var n=t[e.slotID];return n.fetchedAt.push({ts:e.ts,AAXReqInfo:gt(n.fetchedAt.length,e.slotID)}),Object(Ut.m)(e.targeting,"amzniid")&&0<e.targeting.amzniid.length?n.targetedAt.push({ts:e.ts-1,targeting:e.targeting.amzniid[0]}):n.targetedAt.push({ts:e.ts-1,targeting:""}),t}),{});return Object.keys(t).forEach((function(e){if(Object(Ut.m)(t,e)){var n=t[e];n.fetchWithIID=n.fetchedAt.map((function(t){var e=bt(t.ts,n.targetedAt,!0);return e?e.targeting:0})),t[e]=n}})),t}function Ot(){Yt.a.hasAdServerObjectLoaded()?$("noRequest",Yt.a):Yt.a.isCommandQueueDefined()&&Yt.a.cmdQueuePush((function(){$("noRequest",Yt.a)}))}function yt(t){Yt.a.isCommandQueueDefined()&&(Nt.a.dispatch({type:"REQUESTED_BID_FOR_ADSERVER_SLOTS",slotIDs:t}),Yt.a.cmdQueuePush((function(){var e=Object(Gt.b)(Yt.a);"0"===Yt.a.getTargeting("amznbid")[0]&&Z(),v(t,e.map((function(t){return t.slotID})))?e.forEach((function(e){Object(Ut.j)(t,e.slotID)&&!W(e)&&$("bidInFlight",e)})):Yt.a.cmdQueuePush((function(){$("bidInFlight",Yt.a)}))})))}function ht(){return Object(Ut.m)(window,"AMP_CONTEXT_DATA")&&Object(Ut.m)(window.AMP_CONTEXT_DATA,"tagName")&&"AMP-AD"===window.AMP_CONTEXT_DATA.tagName}function _t(t){return Object(Ut.m)(t,"type")&&!(t instanceof Document)&&"amp"===t.type}function jt(t,e){return void 0!==e&&Object(Ut.m)(e,"ampEnv")&&e.ampEnv||_t(t)}function vt(t){return t.split("x")}function St(t,e,n){try{Object(Vt.d)()}catch(t){Object(Kt.b)(t,"__sendPixels-renderImp__")}if(jt(t,n)&&ht())N(t,n);else{var r=!1;"string"==typeof e&&0===e.indexOf("sp|")&&(e=e.substring(3),r=!0);var o,i=e||t.amzniid,a=D(i,r),c=a.slotBid,u=a.dealId;if(c){if(o=u&&1<=u.length?vt("sp"===u?c.bidConfig.amznsz_sp:E(i,c,u)):vt(c.bidConfig.amznsz),1!==arguments.length||Object(te.a)(t)||Object(Kt.b)({message:JSON.stringify(Object.keys(t)),name:"IncorrectJsonp"},"_renderImp-IncorrectArgJsonP"),1===arguments.length)return void M({doc:c.doc,bidID:c.bidConfig.amzniid,sizes:o,html:t.html});c.bidState===Qt.b.rendered&&tt(c),Nt.a.dispatch({type:"BID_STATE_CHANGE",slotID:c.slotID,_targetingSetID:c._targetingSetID,bidState:Qt.b.rendered,ts:Date.now()});var s=c.host,d="amznad".concat(Math.round(1e6*Math.random())),f={bidID:i,doc:t,pp:wt("amznbid",c,u),host:s,adID:d,sizes:o,amznp:wt("amznp",c,u),crID:wt("crid",c,u),fif:!1,dealId:u,isSharedPMP:r,cfe:c.cfe};"1"===c.bidConfig.fif?(f.fif=!0,Nt.a.dispatch({type:"UPDATE_BID_INFO_PROP",slotID:c.slotID,iid:e,key:"doc",value:t}),Object(Jt.b)(L(f),(function(){}),document)):Nt.a.getState().aaxViewabilityEnabled?Dt(f,t):U(f),Q(t,o)}else Object(Kt.b)(new Error("Invalid bid ID tried to render"),"__error-invalid_bid_id_render__",!0)}}function wt(t,e,n){var r="";if(void 0!==n&&1<=n.length){var o="".concat(t,"_sp");"sp"===n&&Object(Ut.m)(e.bidConfig,o)&&(r=e.bidConfig[o])}else Object(Ut.m)(e.bidConfig,t)&&(r=e.bidConfig[t]);return r}function Dt(t,e){var n=e.createElement("script");n.type="text/javascript",n.async=!0;var r={doc:e,bidID:t.bidID,states:{csmLoaded:!1,iframeLoaded:!1,shouldRunViewability:!0}},o=G.bind(null,r);Object(Jt.a)(n,(function(){r.states.csmLoaded=!0,o()}));try{n.addEventListener("error",(function(t){return Object(Vt.b)({_type:"csm_fail",ts:Date.now(),msg:t.message})}))}catch(t){Object(Kt.b)(t,"__error-csm_onerror__")}U(t,r,o),n.src=Nt.a.getState().cfg.CSM_JS,z(e,n)}function Et(t){Object($t.i)(t),b(t),Object(Ut.m)(t,"slots")&&(Nt.a.dispatch({type:"UPDATE_SLOT_BIDS",bids:T(t)}),Object(Ut.m)(t,"ev")&&Nt.a.dispatch({type:"SET_VIEWABILITY",viewability:t.ev}),Object(Ut.m)(t,"cfn")&&Nt.a.dispatch({type:"SET_CFG",cfg:{CSM_JS:"//"===t.cfn.substring(0,2)?t.cfn:"//c.amazon-adsystem.com/".concat(t.cfn)}})),p(t)}function It(){return"number"==typeof Nt.a.getState().cfg.MAX_SLOTS_PER_REQUEST&&0<Nt.a.getState().cfg.MAX_SLOTS_PER_REQUEST}function Tt(t,e){var n=At.bind(null,t,e);void 0===Nt.a.getState().gdpr||null===Nt.a.getState().gdpr?(Nt.a.dispatch({type:"ADD_GDPR_QUE_ITEM",func:n}),1===Nt.a.getState().gdprQue.length&&Object(qt.c)(Nt.a.getState().config.gdpr,Rt)):n()}function Rt(t){Nt.a.dispatch({type:"SET_GDPR_CONFIG",config:t}),Nt.a.getState().gdprQue.map((function(t){try{t()}catch(t){Object(Kt.b)(t,"__gdpr_que__")}})),Nt.a.dispatch({type:"CLEAR_GDPR_QUE"})}function At(t,e){try{Object(ee.b)(e,["function","undefined"])||Object(Kt.c)("fetchBids.callback",ie(e),"function"),"function"!=typeof e&&(e=function(){}),Object(Ut.l)(t)||(Object(Kt.c)("fetchBids.bidConfig",ie(t),"object"),t={}),Object(ee.a)(t.timeout)||("string"==typeof t.timeout?Object(Kt.b)({name:"string-".concat(t.timeout),message:"fetchBids.bidConfig.timeout was a non-numeric string '".concat(t.timeout,"'")},"TypeError-fetchBids.bidConfig.timeout",!0):Object(Kt.c)("fetchBids.bidConfig.timeout",ie(t.timeout),"number")),Object(Ut.m)(t,"params")&&!Object(Ut.l)(t.params)?Object(Kt.c)("fetchBids.bidConfig.params",ie(t.params),"object"):Object(Ut.m)(t,"params")&&Object(Ut.l)(t.params)&&Object.keys(t.params).forEach((function(e){return!(void 0===t.params||"string"!=typeof t.params[e]&&"number"!=typeof t.params[e]&&(Object(Ut.k)(t.params[e])?!t.params[e].reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)&&(Object(Kt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.params.".concat(e," contains a non-string item")},"TypeError-fetchBids.bidConfig.params.".concat(e),!0),1):(Object(Kt.c)("fetchBids.bidConfig.params.".concat(e),ie(t.params[e]),"string' or 'array"),1)))})),Object(Ut.m)(t,"blockedBidders")&&!Object(Ut.k)(t.blockedBidders)?Object(Kt.c)("fetchBids.bidConfig.blockedBidders",ie(t.blockedBidders),"array"):Object(Ut.m)(t,"blockedBidders")&&Object(Ut.k)(t.blockedBidders)&&(t.blockedBidders.reduce((function(t,e){return t&&("string"==typeof e||"number"==typeof e)}),!0)||Object(Kt.b)({name:"non-string array item",message:"'fetchBids.bidConfig.blockedBidders contains a non-string item"},"TypeError-fetchBids.bidConfig.blockedBidders",!0)),Object(Ut.m)(t,"slots")&&!Object(Ut.k)(t.slots)&&Object(Kt.c)("fetchBids.bidConfig.slots",ie(t.slots),"array")}catch(n){Object(Kt.b)(n,"fetchBids-validation",!0)}var n=Nt.a.getState().config.simplerGPT,r=re({},t,{bidReqID:"".concat(Nt.a.getState().AAXReqs.length),slots:[],networkReqs:[]}),o=!1;try{!0===n&&(!Object(Ut.m)(t,"slots")||Object(Ut.m)(t,"slots")&&Object(Ut.k)(t.slots)&&0<t.slots.length&&!Object(Ut.m)(t.slots[0],"slotID"))?0===Object(Gt.b)(Yt.a).length?(Object(Kt.b)(new Error("fetchBids was called in simplerGPT mode before any slots were defined in GPT"),"simplerGpt-NoSlots",!0),o=!0,r.slots=[]):(t.slots?r.slots=t.slots.map((function(t){return new Wt.b(t)})):r.slots=Object(Gt.b)(Yt.a),r.slots=r.slots.filter(Gt.a),0===r.slots.length&&(Object(Kt.b)(new Error("No GPT slots provided to apstag.fetchBids() had valid sizes"),"simplerGpt-NoValidSizes",!0),o=!0)):Object(Ut.m)(t,"slots")&&Object(Ut.k)(t.slots)&&(r.slots=t.slots.map((function(t){return new Zt.a(t)})))}catch(n){Object(Kt.b)(n,"fetchBids-getSlots",!0)}var i,a=Object(Mt.h)(r,Nt.a.getState());try{e=Object(Mt.a)(F(e,r),a)}catch(n){Object(Kt.b)(n,"fetchBids-wrapCallback",!0)}if(0===r.slots.length)return!1===o&&Object(Kt.b)(new Error("No slots provided to apstag.fetchBids"),"__error-no_slots_provided_bid_request__",!0),void setTimeout(e.bind(null,[]),10);if(yt(r.slots.filter(Gt.d).map(Gt.c)),Nt.a.dispatch({type:"NEW_FETCH_BID_REQUEST",fid:r.bidReqID,pto:a}),Nt.a.dispatch({type:"RECORD_ORIGINAL_BID_CONFIG",bidConfig:r}),Object(Ft.d)("fake_bids"))V(r,e);else if(Qt.i)if(Nt.a.dispatch({type:"SHOULD_CHUNK_REQUESTS",value:Object(Ut.n)(Nt.a.getState().cfg.CHUNK_BID_REQUESTS_PROPORTION)}),Nt.a.getState().experiments.chunkRequests&&It()){i=Ct(r);for(var c=0;c<i.length;c++)i[c].bidReqID="".concat(r.bidReqID,"-").concat(c);Nt.a.dispatch({type:"ADD_CHUNKED_REQUESTS",fid:r.bidReqID,numChunks:i.length}),i.forEach((function(t){d(Object($t.d)(t,a),e,t.bidReqID)}))}else d(Object($t.d)(r,a),e,r.bidReqID);else Object(Jt.b)(Object($t.d)(r,a),e)}function Ct(t){for(var e=Math.ceil(t.slots.length/Nt.a.getState().cfg.MAX_SLOTS_PER_REQUEST),n=new Array(e),r=0;r<e;r++){var o=r*Nt.a.getState().cfg.MAX_SLOTS_PER_REQUEST;n[r]={slots:t.slots.slice(o,o+Nt.a.getState().cfg.MAX_SLOTS_PER_REQUEST)}}return n.map((function(e){return Object.assign({},t,e)}))}function Pt(t){Object(Ut.m)(Nt.a.getState().config,"adServer")?Yt.a.isSupported?(P(t),Y()):Object(Kt.b)(new Error("apstag.setDisplayBids called with unsupported ad server: ".concat(Nt.a.getState().config.adServer)),"__error-invalid_ad_server_setdisplaybids__",!0):Object(Kt.b)(new Error("apstag.setDisplayBids called without specifying ad server"),"__error-no_ad_server_setdisplaybids__",!0)}function kt(t,e){O(t),Object(Yt.b)(t.adServer),Ot(),"function"==typeof e&&e()}function zt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"display";switch(t){case"display":return Qt.g;case"video":return Qt.u;default:return Object($t.h)(Nt.a.getState(),Yt.a)&&Object(Ut.k)(Nt.a.getState().targetingKeys[t])?Nt.a.getState().targetingKeys[t]:[]}}function xt(){return Nt.a.getState().AAXReqs.reduce((function(t,e){return e.bidConfig.slots.reduce((function(t,e){return t[e.slotID]=e.slotName,t}),t)}),{})}function Lt(t,e){var n=e;return function(){return o({method:t,args:arguments}),n.apply(void 0,arguments)}}function Bt(t,e){return function(){try{return t.apply(void 0,arguments)}catch(t){return Object(Kt.b)(t,e,!0),null}}}try{Object(Ut.m)(window,"apstag")&&Object(Ut.m)(window.apstag,"_Q")&&0<window.apstag._Q.length&&Nt.a.dispatch({type:"SET_Q",Q:window.apstag._Q})}catch(t){Object(Kt.b)(t,"__error-storeApstagQ__")}window.apstag=(rt={punt:Et,init:kt,debug:Ft.a,_getSlotIdToNameMapping:xt,targetingKeys:zt,fetchBids:Tt,setDisplayBids:Pt,renderImp:St,bids:Et},Object.keys(rt).forEach((function(t){rt[t]=Lt(t,rt[t]),rt[t]=Bt(rt[t],t)})),n?Object(Ft.b)(!0,t):e&&Object(Ft.b)(!1,t),!0===Object(Ft.c)("exposeApi")&&(rt._api={_getBidSetInfo:lt,_applyTargetingToGPTSlot:R,dispatch:Nt.a.dispatch,_clearTargetingFromGPTSlot:_,_clearBidSetOnSlot:j,_doFbSync:k,_getCurrentSlotBids:S,_creativeURL:L,getSlotFetchCounts:it,buildBidUrl:$t.d}),rt),function(){try{Nt.a.dispatch({type:"SHOULD_CF_ROUTE",value:Object(Ut.n)(Nt.a.getState().cfg.CF_ROUTING_RATE)}),Nt.a.getState().experiments.shouldCFRoute&&Nt.a.dispatch({type:"SET_HOST",hostName:"DEFAULT_AAX_BID_HOST",hostValue:"c.amazon-adsystem.com"}),Nt.a.dispatch({type:"SHOULD_SAMPLE_LATENCY",value:Object(Ut.n)(Nt.a.getState().cfg.LATENCY_SAMPLING_RATE)}),Nt.a.dispatch({type:"SHOULD_SAMPLE_SLOT_RENDER",value:Object(Ut.n)(Nt.a.getState().cfg.SLOT_RENDER_SAMPLING_RATE)});var t=Nt.a.getState();(t.experiments.shouldSampleLatency||t.displayAdServer.shouldSampleRender)&&ot(),t.displayAdServer.shouldSampleRender&&ct(),t.experiments.shouldSampleLatency&&(et(),ut())}catch(t){Object(Kt.b)(t,"__error-sampleLatency__")}try{m()}catch(t){Object(Kt.b)(t,"__error-doLast__")}if(!ht())try{var n=function(t){t&&"object"!==ie(t)||(t="Request Timeout or Error"),Object(Kt.b)({message:"csm-rtb-comm-js loading failed",name:t},"__csm-rtb-comm-js__")};Object(Jt.d)({url:Nt.a.getState().cfg.CSM_RTB_COMMUNICATOR_JS,onload:function t(e){e.readyState===XMLHttpRequest.DONE&&200===e.status?eval(e.responseText):n(JSON.stringify({status:e.statusText,response:e.responseXML}))},onerror:n,ontimeout:n})}catch(t){Object(Kt.b)(t,"__load-csm-rtb-comm-js__")}Object(Ft.e)()}()}())}catch(t){Object(Kt.b)(t,"__error-global__")}}]);
//# sourceMappingURL=apstag.js.map